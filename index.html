<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Presdocs by dwillis</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Presdocs</h1>
        <p class="header">A Ruby wrapper for the Compilation of Presidential Documents.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/dwillis/presdocs/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/dwillis/presdocs/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/dwillis/presdocs">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/dwillis">dwillis</a></p>


      </header>
      <section>
        <h1>Presdocs: A Ruby wrapper for the Compilation of Presidential Documents</h1>

<p>The White House releases a lot of stuff, and some of it is included in what's known as the <a href="http://www.gpo.gov/fdsys/browse/collection.action?collectionCode=CPD">Compilation of Presidential Documents</a>. This is a Ruby library for accessing details about those documents, including subjects, dates, locations and more.</p>

<p>Nearly every day, the White House releases one or more official publications, which may include presidential statements, announcements of nominations, press releases and schedule information. These are published by the Government Printing Office. Presdocs wraps JSON endpoints exposed by GPO, which has created a <a href="http://m.gpo.gov/dcpd">mobile application</a> for browsing and searching these documents. I owe a debt of gratitude to the government employees who made these endpoints available; your commitment to making public information more easily accessible is truly a public service.</p>

<p>It is important to note that because Presdocs is wrapping APIs for a mobile app, results are limited to 5 documents at a time, although it is possible to access documents by date and location.</p>

<p>The current version is 0.6.</p>

<h2>Installation</h2>

<p>Add this line to your application's Gemfile:</p>

<pre><code>gem 'presdocs'
</code></pre>

<p>And then execute:</p>

<pre><code>$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre><code>$ gem install presdocs
</code></pre>

<h2>Getting Started</h2>

<p>The following commands, in irb or a rails console, will get you setup:</p>

<pre><code>require 'rubygems'
require 'presdocs'
include Presdocs
</code></pre>

<p>The GPO's mobile app has a number of endpoints that are wrapped by Presdocs. The main objects are Documents and Categories.</p>

<h3>Document Attributes</h3>

<p>All documents have basic attributes, and some have additional ones depending on the method used to retrieve them. The basic attributes are:</p>

<ul>
<li>id - A string unique identifier from GPO</li>
<li>title - The title of the document</li>
<li>source - Will almost always be the CPD for a given date</li>
<li>president - The person occupying the office of president for the given document.</li>
<li>date - A Ruby date representing the date of the document</li>
</ul><p>The following additional attributes, which are available for location-based methods, are:</p>

<ul>
<li>city - The city where the event described in the title took place.</li>
<li>state - The state where the event described in the title took place.</li>
<li>lat - The latitude coordinate for the location where the event described in the title took place.</li>
<li>lng - The longitude coordinate for the location where the event described in the title took place.</li>
</ul><p>Some records have no location.</p>

<h3>Accessing Latest Documents</h3>

<p>By default, all documents are returned in reverse chronological order. To retrieve the latest five presidential documents:</p>

<pre><code>@latest = Document.latest
1.9.3-p362 :005 &gt; @latest.first
=&gt; #&lt;Presdocs::Document:0x007ff83c011940 @id="DCPD-201300112", @city="Washington", @state="DC", @lat=nil, @lng=nil, @title="The President's Weekly Address", @source="Compilation of Presidential Documents. Addresses and Remarks.  Saturday, February 23, 2013.", @president="Obama, Barack H.", @date=#&lt;Date: 2013-02-23 ((2456347j,0s,0n),+0s,2299161j)&gt;&gt;
</code></pre>

<h3>Document Details</h3>

<p>To retrieve greater details for a specific document, use its id:</p>

<pre><code>@details = Document.detail("DCPD-201300112")
</code></pre>

<p>Detail records for a document have all of the attributes described above, plus several others:</p>

<ul>
<li>category - A broad classification of the type of event described by the document.</li>
<li>notes - Text describing the scene of the event, including start time and persons referenced in the document.</li>
<li>subjects - An array of topics mentioned in the document.</li>
<li>fdsys_url - The URL of the document at the GPO site.</li>
<li>html - A full-text HTML representation of the document.</li>
</ul><h3>Documents By Date</h3>

<p>To retrieve documents issued on a specific date, pass either a date string or a Ruby Date object into the #date method:</p>

<pre><code>@feb22 = Document.date('2/22/2013')
 =&gt; [#&lt;Presdocs::Document:0x007ff83b017aa8 @id="DCPD-201300109", @city=nil, @state=nil, @lat=nil, @lng=nil, @title="Joint Statement by President Barack Obama and Prime Minister Shinzo Abe of Japan", @source="Compilation of Presidential Documents. Joint Statements.  Friday, February 22, 2013.", @president="Obama, Barack H.", @date=#&lt;Date: 2013-02-22 ((2456346j,0s,0n),+0s,2299161j)&gt;&gt;, #&lt;Presdocs::Document:0x007ff83c031c90 @id="DCPD-201300108", @city="Washington", @state="DC", @lat=nil, @lng=nil, @title="Remarks Following a Meeting with Prime Minister Shinzo Abe of Japan and an Exchange With Reporters", @source="Compilation of Presidential Documents. Interviews With the News Media.  Friday, February 22, 2013.", @president="Obama, Barack H.", @date=#&lt;Date: 2013-02-22 ((2456346j,0s,0n),+0s,2299161j)&gt;&gt;]
</code></pre>

<p>You also can retrieve documents issued within a range of two dates, like so:</p>

<pre><code>@week = Document.date_range('2/14/2013','2/21/2013')
</code></pre>

<p>The date_range method is inclusive of the start and end dates.</p>

<h3>Documents By Location</h3>

<p>Most, but not all, documents have a location as part of their attributes. Presdocs offers several ways to access documents based on location, including city and state-specific searches and distance queries. To retrieve the most recent five documents with location data:</p>

<pre><code>@locations = Document.with_locations
</code></pre>

<p>The city and state attributes will be populated, as will latitude and longitude fields. These can be used several ways.</p>

<h3>Documents by City and State</h3>

<p>To retrieve the five most recent documents for a specific state, pass that state's postal abbreviation:</p>

<pre><code>@georgia = Document.state('GA')
=&gt; [#&lt;Presdocs::Document:0x007ff83b1d7780 @id="DCPD-201300098", @city="Decatur", @state="GA", @lat="33.77482750", @lng="-84.29631230", @title="Remarks at the Decatur Community Recreation Center in Decatur, Georgia", @source="Compilation of Presidential Documents. Addresses and Remarks.  Thursday, February 14, 2013.", @president="Obama, Barack H.", @date=#&lt;Date: 2013-02-14 ((2456338j,0s,0n),+0s,2299161j)&gt;&gt;, #&lt;Presdocs::Document:0x007ff83b1d6100 @id="DCPD-201200311", @city="Fort Stewart", @state="GA",...]
</code></pre>

<p>To retrieve the five most recent documents for a city and state, pass both:</p>

<pre><code>@atlanta = Document.city('Atlanta','GA')
=&gt; [#&lt;Presdocs::Document:0x007ff83a1ddeb0 @id="DCPD-201200189", @city="Atlanta", @state="GA", @lat="33.74899540", @lng="-84.38798240", @title="Remarks at an Obama Victory Fund 2012 Fundraiser in Atlanta, Georgia", @source="Compilation of Presidential Documents. Addresses and Remarks.  Friday, March 16, 2012.", @president="Obama, Barack H.", @date=#&lt;Date: 2012-03-16 ((2456003j,0s,0n),+0s,2299161j)&gt;&gt;,...]
</code></pre>

<p>As a bonus, the city and state methods also work when using foreign cities and countries (in place of the state). For example:</p>

<pre><code>@cannes = Document.city('Cannes','France')
</code></pre>

<p>Works just as well as Atlanta.</p>

<h3>Distance Searches</h3>

<p>Finally, it is possible to search for documents using latitude and longitude coordinates, and a distance in miles. For example, to find documents with locations within 10 miles of Atlanta, you would pass in the coordinates and the distance:</p>

<pre><code>@atlanta_plus_10 = Document.location_with_distance("33.74899540", "-84.38798240", 10)
=&gt; [#&lt;Presdocs::Document:0x007ff83c048378 @id="DCPD-201300098", @city="Decatur", @state="GA", @lat="33.77482750", @lng="-84.29631230", @title="Remarks at the Decatur Community Recreation Center in Decatur, Georgia", @source="Compilation of Presidential Documents. Addresses and Remarks.  Thursday, February 14, 2013.", @president="Obama, Barack H.", @date=#&lt;Date: 2013-02-14 ((2456338j,0s,0n),+0s,2299161j)&gt;&gt;,...]
</code></pre>

<p>Distance searches may take several seconds to respond, as the API seems slower for those queries than the others.</p>

<h3>Category Attributes</h3>

<p>Documents fall into one of more than 25 broad categories, although some of them appear to be variations on the same idea ("Addresses and Remarks", "Addresses to the Nation", etc.). You can retrieve all categories:</p>

<pre><code>@all_cats = Category.all
=&gt; [#&lt;Presdocs::Category:0x007ff83a201b30 @name="Addresses and Remarks", @count=1667, @children=nil&gt;, #&lt;Presdocs::Category:0x007ff83a201900 @name="Statements by the President", @count=655, @children=nil&gt;, #&lt;Presdocs::Category:0x007ff83a2016d0 @name="Proclamations", @count=589, @children=nil&gt;, #&lt;Presdocs::Category:0x007ff83a2014a0 @name="Communications to Congress", @count=250, @children=nil&gt;,...]
</code></pre>

<p>Each category has a count of the number of documents within it and an attribute called children, which for now is empty for all categories.</p>

<h3>Documents by Topic</h3>

<p>Even though there are about 30 "top-level" categories, there appear to be others included in the CPD system, so you can search by what amounts to keyword. To retrieve the latest 5 documents from a topic, pass in a single word describing it. For example, to find documents relating to President Obama's remarks honoring the Los Angeles Lakers:</p>

<pre><code>@lakers = Document.category("Lakers")
 =&gt; [#&lt;Presdocs::Document:0x007ff83a24c1f8 @id="DCPD-201001065", @city="Washington", @state="DC", @lat=nil, @lng=nil, @title="Remarks Honoring the 2010 National Basketball Association Champion Los Angeles Lakers", @source="Compilation of Presidential Documents. National Basketball Association champion Los Angeles Lakers.  Monday, December 13, 2010.", @president="Obama, Barack H.", @date=#&lt;Date: 2010-12-13 ((2455544j,0s,0n),+0s,2299161j)&gt;&gt;, #&lt;Presdocs::Document:0x007ff83a24b848 @id="DCPD-201000052", @city="Washington", @state="DC", @lat=nil, @lng=nil, @title="Remarks Honoring the 2009 National Basketball Association Champion Los Angeles Lakers", @source="Compilation of Presidential Documents. Addresses and Remarks.  Monday, January 25, 2010.", @president="Obama, Barack H.", @date=#&lt;Date: 2010-01-25 ((2455222j,0s,0n),+0s,2299161j)&gt;&gt;]
</code></pre>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>